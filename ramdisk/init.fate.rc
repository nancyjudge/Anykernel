on init	
    # Less throttling, more experience (CPU)
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "lightningutil"
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 2016000
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 652800
    chmod 777 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
    chmod 777 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq

    # Less throttling, more experience (GPU)
	
    #GPU
    write /sys/class/kgsl/kgsl-3d0/devfreq/governor "msm-adreno-tz"
    write /sys/class/kgsl/kgsl-3d0/devfreq/min_freq 133330000
    write /sys/class/kgsl/kgsl-3d0/max_gpuclk 650000000
	
on fs
    mount_all ./fstab.qcom --early

    # boot time fs tune
    write /sys/block/mmcblk1/queue/iostats 0
    write /sys/block/mmcblk1/queue/iosched/slice_idle 0
    write /sys/block/mmcblk1/queue/read_ahead_kb 2048
    write /sys/block/mmcblk1/queue/nr_requests 256
    write /sys/block/mmcblk0/queue/iostats 0
    write /sys/block/mmcblk0/queue/iosched/slice_idle 0
    write /sys/block/mmcblk0/queue/read_ahead_kb 2048
    write /sys/block/mmcblk0/queue/nr_requests 256
    write /sys/block/mmcblk0/queue/scheduler "cfq"
    write /sys/block/mmcblk1/queue/scheduler "cfq"
    write /sys/block/mmcblk0/queue/iostats 0
    write /sys/block/mmcblk1/queue/iostats 0
    write /sys/block/mmcblk0/queue/add_random 0
    write /sys/block/mmcblk1/queue/add_random 0

on property:sys.boot_completed=1
   
   
    # Set default profile on first boot
    exec u:r:init:s0 root root -- /init.fate.sh
    exec u:r:su:s0 root root -- /init.fate.sh

# Run post-boot script after Qualcomm's post_boot shell script
on property:init.svc.qcom-post-boot=stopped

# VM
    write /proc/sys/vm/dirty_ratio "80"
    write /proc/sys/vm/dirty_background_ratio "5"
    write /proc/sys/vm/swappiness "80"
    write /proc/sys/vm/overcommit_ratio "50"
    write /proc/sys/vm/vfs_cache_pressure "20"

#FS
    write /sys/block/mmcblk1/queue/read_ahead_kb 128
    write /sys/block/mmcblk0/queue/read_ahead_kb 126

#GPU BOOST
    write /sys/module/governor_msm_adreno_tz/parameters/boost_freq 400000000
    write /sys/module/governor_msm_adreno_tz/parameters/boost_duration 750

#WB
    echo $((200<<20)) > /sys/block/zram0/writeback_limit
    echo 1 > /sys/block/zram/0/writeback_limit_enable
